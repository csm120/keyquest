(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&c(r)}).observe(document,{childList:!0,subtree:!0});function i(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(e){if(e.ep)return;e.ep=!0;const o=i(e);fetch(e.href,o)}})();const s="kq:theme";function d(){return matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function u(n){document.documentElement.setAttribute("data-theme",n);try{localStorage.setItem(s,n)}catch{}const t=document.querySelector(`input[name="theme"][value="${n}"]`);t&&(t.checked=!0)}function m(){let n=d();try{const t=localStorage.getItem(s);t&&(n=t)}catch{}u(n),document.querySelectorAll('input[name="theme"]').forEach(t=>{t.addEventListener("change",()=>u(t.value))});try{localStorage.getItem(s)||matchMedia("(prefers-color-scheme: dark)").addEventListener?.("change",()=>u(d()))}catch{}}function f(n){const t=n.getTime()-Date.now(),i=Math.abs(t)/1e3;if(i<30)return"just now";const c=[["year",31536e3],["month",2592e3],["day",86400],["hour",3600],["minute",60]],e=Intl?.RelativeTimeFormat?new Intl.RelativeTimeFormat(void 0,{numeric:"auto",style:"narrow"}):null;for(const[o,r]of c)if(i>=r||o==="minute"){const a=Math.round(t/r);return e?e.format(a,o):`${Math.max(1,Math.abs(Math.round(t/60)))}m ago`}return"just now"}async function p(){try{const n=await fetch("build.json",{cache:"no-store"});if(!n.ok)return;const t=await n.json(),i=String(t.commit||"").slice(0,7)||"unknown",c=new Date(String(t.built||Date.now())),e=document.getElementById("buildInfo");if(!e)return;const o=()=>{e.textContent=`Deployed ${i} Â· ${f(c)}`;try{e.setAttribute("title",c.toLocaleString())}catch{}e.setAttribute("aria-live","off")};o();const r=window.setInterval(o,6e4);document.addEventListener("visibilitychange",()=>{document.hidden&&clearInterval(r)},{once:!0})}catch{}}function h(){const n=document.getElementById("game-root");n.innerHTML=`
    <div class="hud">
      <button id="startBtn" aria-keyshortcuts="Space">Start</button>
      <button id="pauseBtn" disabled aria-keyshortcuts="Space">Pause</button>
      <button id="resetBtn" disabled>Reset</button>
      <output id="timeOut" aria-live="off">00:30</output>
      <output id="wpmOut" aria-live="off"></output>
      <output id="accOut" aria-live="off"></output>
      <div id="prompt"></div>
      <input id="typing" disabled />
    </div>`;const t=n.querySelector("#startBtn"),i=n.querySelector("#pauseBtn"),c=n.querySelector("#typing"),e=document.getElementById("announce");let o=!1;function r(a){o=a,t.disabled=a,i.disabled=!a,c.disabled=!a,e.textContent=a?"Started":"Paused",a&&c.focus()}t.addEventListener("click",()=>r(!0)),i.addEventListener("click",()=>r(!1)),document.addEventListener("keydown",a=>{a.key===" "&&(a.preventDefault(),r(!o))})}function y(){const n=document.querySelector("a.skip-link"),t=document.getElementById("game-root");!n||!t||n.addEventListener("click",i=>{i.preventDefault(),t.setAttribute("tabindex","-1"),t.focus(),setTimeout(()=>t.removeAttribute("tabindex"),0)})}function l(){m(),h(),y(),p()}document.readyState!=="loading"?l():window.addEventListener("DOMContentLoaded",l);
